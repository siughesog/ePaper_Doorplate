# Railway Nixpacks 配置
# 用于自动检测和构建 Spring Boot + Python 项目

[phases.setup]
nixPkgs = ["python3", "python3Packages.pillow", "python3Packages.numpy"]

[phases.install]
# 安装 Python 依赖
# requirements.txt 现在与 nixpacks.toml 在同一目录
cmds = [
  "pip3 install -r requirements.txt || echo 'Requirements file not found, skipping Python dependencies'"
]

[phases.build]
cmds = [
  "mvn clean package -DskipTests"
]

[start]
cmd = "java -jar target/epaperdoorplate-1.0-SNAPSHOT.jar"

