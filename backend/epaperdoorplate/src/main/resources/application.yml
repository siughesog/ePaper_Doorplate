spring:
  data:
    mongodb:
      # 使用環境變數，如果未設置則使用預設值
      # MongoDB Atlas 連接字符串格式：
      # mongodb+srv://username:password@cluster.mongodb.net/database?retryWrites=true&w=majority
      # 或
      # mongodb://username:password@cluster.mongodb.net:27017/database?ssl=true&retryWrites=true&w=majority
      uri: ${MONGODB_URI:mongodb://localhost:27017/test_for_Epaper_http_request}
      # MongoDB SSL 配置（如果 URI 中未包含 SSL 參數，可以通過以下配置啟用）
      #ssl:
         #enabled: true
         #invalid-host-name-allowed: false
  security:
    user:
      name: ${SPRING_SECURITY_USER_NAME:admin}
      password: ${SPRING_SECURITY_USER_PASSWORD:admin123}
  servlet:
    multipart:
      # 文件上傳大小限制（使用環境變數）
      max-file-size: ${SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE:10MB}
      max-request-size: ${SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE:10MB}
  web:
    resources:
      # 靜態資源路徑（使用環境變數）
      static-locations: ${SPRING_WEB_RESOURCES_STATIC_LOCATIONS:file:./uploads/}

# 服務器配置
# Railway 會自動設置 PORT 環境變量，優先使用它
server:
  port: ${PORT:${SERVER_PORT:8080}}
  address: ${SERVER_ADDRESS:0.0.0.0}
  # HTTPS 配置
  # 注意：云端部署时，通常使用平台提供的 SSL（如 Railway/Render）
  # 如果使用平台 SSL，设置 SERVER_SSL_ENABLED=false
  # 如果需要使用自己的证书，设置 SERVER_SSL_ENABLED=true 并提供 keystore.p12
  ssl:
    enabled: ${SERVER_SSL_ENABLED:true}
    # 只有在 enabled=true 时才需要以下配置
    key-store: ${SERVER_SSL_KEYSTORE:classpath:keystore.p12}
    key-store-password: ${KEYSTORE_PASSWORD:123456}
    key-store-type: PKCS12
    key-alias: ${SERVER_SSL_KEY_ALIAS:tomcat}

# JWT 配置
jwt:
  # 使用環境變數，如果未設置則使用預設值（開發環境）
  # ⚠️ 生產環境必須設置強密鑰！
  secret: ${JWT_SECRET:mySecretKey123456789012345678901234567890}
  expiration: ${JWT_EXPIRATION:86400000} # 24小時

# 文件上傳配置
file:
  upload-dir: ${FILE_UPLOAD_DIR:uploads}

upload:
  folder: ${UPLOAD_FOLDER:uploads}

# 存儲配置
# local: 本地文件系統存儲（開發環境）
# s3: AWS S3 雲端存儲（生產環境）
storage:
  type: ${STORAGE_TYPE:local}
  local:
    base-url: ${STORAGE_LOCAL_BASE_URL:}
  s3:
    bucket: ${STORAGE_S3_BUCKET:}
    region: ${STORAGE_S3_REGION:us-east-1}
    access-key: ${STORAGE_S3_ACCESS_KEY:}
    secret-key: ${STORAGE_S3_SECRET_KEY:}

# Line Bot 配置（全部使用環境變數）
line:
  bot:
    # Line Bot Channel Secret（從 Line Developers Console 獲取）
    # 環境變數：LINE_BOT_CHANNEL_SECRET
    channel-secret: ${LINE_BOT_CHANNEL_SECRET:}
    # Line Bot Channel Access Token（從 Line Developers Console 獲取）
    # 環境變數：LINE_BOT_CHANNEL_ACCESS_TOKEN
    channel-access-token: ${LINE_BOT_CHANNEL_ACCESS_TOKEN:}
    # Line Bot ID（用於生成加入好友連結，格式：@bot-id，不包含 @ 符號）
    # 環境變數：LINE_BOT_BOT_ID
    # 例如：如果 Bot ID 是 @abc123，則設置為 abc123
    bot-id: ${LINE_BOT_BOT_ID:}
    # Line Bot Webhook URL（您的後端 webhook 端點）
    # 環境變數：LINE_BOT_WEBHOOK_URL
    # 格式：https://yourdomain.com/api/line/webhook
    # 注意：需要在 Line Developers Console 中設置此 URL
    webhook-url: ${LINE_BOT_WEBHOOK_URL:}

# Guest 訊息防濫用配置
app:
  guest-message:
    # 同一 IP 地址在 1 小時內最多留言次數
    max-per-ip-per-hour: ${GUEST_MESSAGE_MAX_PER_IP_PER_HOUR:3}
    # 同一設備在 1 小時內最多留言次數
    max-per-device-per-hour: ${GUEST_MESSAGE_MAX_PER_DEVICE_PER_HOUR:5}

# Email 配置（全部使用環境變數）
app:
  email:
    # 是否啟用 Email 發送功能
    # 環境變數：EMAIL_ENABLED
    # 設置為 true 時，需要配置以下 SMTP 相關環境變數
    enabled: ${EMAIL_ENABLED:false}
    smtp:
      # SMTP 服務器地址
      # 環境變數：EMAIL_SMTP_HOST
      # 常見 SMTP 服務器：
      # - Gmail: smtp.gmail.com
      # - Outlook: smtp-mail.outlook.com
      # - SendGrid: smtp.sendgrid.net
      # - Mailgun: smtp.mailgun.org
      host: ${EMAIL_SMTP_HOST:}
      # SMTP 端口
      # 環境變數：EMAIL_SMTP_PORT
      # 常見端口：
      # - 587 (TLS/STARTTLS，推薦)
      # - 465 (SSL)
      # - 25 (不推薦，可能被防火牆阻擋)
      port: ${EMAIL_SMTP_PORT:587}
      # SMTP 用戶名（通常是您的 email 地址）
      # 環境變數：EMAIL_SMTP_USERNAME
      username: ${EMAIL_SMTP_USERNAME:}
      # SMTP 密碼（Gmail 需要使用應用程式密碼，不是帳戶密碼）
      # 環境變數：EMAIL_SMTP_PASSWORD
      password: ${EMAIL_SMTP_PASSWORD:}
    # 發送者 email 地址
    # 環境變數：EMAIL_FROM
    # 格式：your-email@example.com 或 "Your Name <your-email@example.com>"
    from: ${EMAIL_FROM:}